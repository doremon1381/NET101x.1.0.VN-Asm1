
@{
    ViewBag.Title = "Danh sách quyên góp";
}


<div class="container">

    <div class="row mb-5 justify-content-center">
        <div class="col-md-7 text-center">
            <h2 class="section-title mb-2">Các đợt quyên góp</h2>
        </div>
    </div>

    <ul class="job-listings mb-5">
        @foreach (var plan in (List<Donation.Models.Donation>)ViewBag.DonationPlans)
        {
            <li style="margin-bottom: 20px" class="job-listing d-block d-sm-flex pb-3 pb-sm-0 align-items-center ">
                <div class="job-listing-about d-sm-flex custom-width w-100 justify-content-between mx-4">
                    <div class="job-listing-position custom-width  mb-3 mb-sm-0" style="padding: 10px;width: 250px">
                        <h2>@plan.Title</h2>
                        @*<strong> Mới tạo </strong>*@
                    </div>
                    <div class="job-listing-location mb-3 mb-sm-0 custom-width w-10" style="padding: 10px;">
                        Ngày bắt đầu<br>
                        <strong>@plan.StartDate.ToString("dd/MM/yyyy")</strong><br>
                    </div>
                    <div class="job-listing-location mb-3 mb-sm-0 custom-width w-10" style="padding: 10px;">
                        Ngày kết thúc<br>
                        <strong>@plan.EndDate.ToString("dd/MM/yyyy")</strong><br>
                    </div>
                    <div class="job-listing-location mb-3 mb-sm-0 custom-width w-25" style="padding: 10px;">
                        <span class="icon-accessible"></span> <span>@plan.OrganizationName</span><br>
                        <strong>@plan.OrganizationPhone</strong><br>
                    </div>
                    <div class="job-listing-meta custom-width w-20">
                        <button style="margin-top: 20px" class="btn btn-primary py-2"
                                data-bs-toggle="modal"
                                type="button"
                                data-bs-target="#register@(plan.Id)"
                                @(plan.Status != Donation.Models.DonationStatus.Open ? "disabled" : "")
                                @((bool)ViewBag.UserIsActive ? "" : "disabled")>
                            Quyên góp
                        </button>
                        <a style="margin-top: 20px;background-color: white !important;" type="button" class="btn py-2"
                           href="/donation/UserDonationDetails?donationId=@plan.Id">
                            <span style="color: darkseagreen;font-weight:bold">Chi tiết</span>
                        </a>
                    </div>
                </div>
                <!-- Modal -->
                <div class="modal fade" tabindex="-1" id="register@(plan.Id)" @*aria-labelledby="exampleModalLabel" aria-hidden="true" role="dialog"*@>
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Quyên góp: <span></span></h5>
                                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            @using (Html.BeginForm("CreateNewUserDonation", "donation", FormMethod.Post))
                            {
                                <div class="modal-body">
                                    <div class="row">

                                        <div class="col-12">
                                            <label for="addname"
                                                   class="col-form-label">Họ tên:</label>
                                            <input type="text" class="form-control"
                                                   id="addname" name="name" placeholder="" required readonly value="@(User.Identity.Name)">
                                            <label for="addname"
                                                   class="col-form-label">Số tiền quyên góp:</label>
                                            <input type="number" class="form-control" placeholder=""
                                                   id="addname" name="money" required>
                                            <input type="hidden" class="form-control" placeholder=""
                                                   id="addname" name="idUser">
                                            <input type="hidden" class="form-control" placeholder=""
                                                   id="addname" name="idDonation" required value="@(plan.Id)">
                                            <input type="hidden" class="form-control" placeholder=""
                                                   id="path" name="currentPath" value="UserView?direction=&pageNumber=0">
                                            <label for="addname"
                                                   class="col-form-label">Lời nhắn:</label>
                                            <textarea rows="10" cols="3" class="form-control" name="note"></textarea>
                                        </div>

                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                                        <button type="submit" class="btn btn-primary">Quyên góp</button>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
                @*<script>
                         function detail(id){
                             window.location = '/donation/detail/' + id;
                         }


                    </script>*@
            </li>
        }

    </ul>

    <div class="row pagination-wrap">
        <div class="col-md-6 text-center text-md-left mb-4 mb-md-0">

        </div>
        <div class="col-md-6 text-center text-md-right">
            <div class="pagination ml-auto">
                @*@Html.ActionLink("Prev", "UserView", null)*@
                @if ((int)ViewBag.PageNumber == 0)
                {
                    <a class="prev page-link" style="pointer-events:none;cursor:not-allowed" href="/donation/UserView?pageNumber=@(ViewBag.PageNumber)&direction=prev">Prev</a>
                }
                else
                {
                    <a class="prev page-link" href="/donation/UserView?pageNumber=@(ViewBag.PageNumber)&direction=prev">Prev</a>
                }
                <div class="d-inline-block"></div>
                @if ((int)ViewBag.PageNumber < (int)ViewBag.LastPage - 1)
                {
                    <a class="next page-link" href="/donation/UserView?pageNumber=@(ViewBag.PageNumber)&direction=next">Next</a>
                }
                else
                {
                    <a class="next page-link" style="pointer-events: none;cursor: not-allowed" href="/donation/UserView?pageNumber=@(ViewBag.PageNumber)&direction=next">Next</a>
                }
            </div>
        </div>
    </div>

</div>
